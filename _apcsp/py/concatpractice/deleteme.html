<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>replit</title>
  <!-- <link href="style.css" rel="stylesheet" type="text/css" /> -->
  <style>
    .hide {
        display:none !important;
    }
    .show {
        display:block !important;
    }
    pre{
        font-size: 1.5rem;
    }
    ul{
        padding:0px;
    }
  </style>
</head>


    <body>
        
      <button onclick="generate()">Generate Concat Practice</button>
        <p>What will print when this code runs?</p>
        <p></p>
        <pre id="output"></pre>
        <table>
            <tr>
                <td><button onclick="revealAnswer()">Reveal Answer</button></td>
                <td><span id="answer" style="display:none;"></span></td>
            </tr>
        </table>
        


  <script>

    let displayedCodeLines = [];


function generate() {
    document.getElementById("answer").style.display = "none";
  
  let nums = shuffleArray([1,2,3,4,5,6,7,8,9]);
  let declarations = ["x = \""+nums.pop()+"\"","y = \""+nums.pop()+"\""]
  let fullListOfCodeLines = ["y = \""+nums.pop()+"\"","x = x + \""+nums.pop()+"\"","x = x + \""+nums.pop()+"\"",,"x = y","y = x + y","x = x + y","y = y + y","x = x + x"]
  shuffleArray(fullListOfCodeLines);
  displayedCodeLines = declarations;
  fullListOfCodeLines.forEach(function(element) {
    
    if(Math.random() > 0.5){
      displayedCodeLines.push(element);
    } 
    
  });
  return displayedCodeLines;

}

function revealAnswer() {
      const showItems = document.getElementsByClassName('show');
      //let expression = 'let x="1",y="2";';
      let expression = "let "+document.getElementById("declare1").textContent.trim() + ";";
      expression += "let "+document.getElementById("declare2").textContent.trim() + ";";
      for (let item of showItems) {
    const preElement = item.querySelector('pre');
    if (preElement) {
      expression += preElement.textContent.trim() + ";";
    }
  }
      expression += "x;"
      //console.log(expression);
      const answer = eval(expression);
      //return result;
      document.getElementById("answer").innerText = "Answer: " + answer;
    document.getElementById("answer").style.display = "block";
}

function shuffleArray(array) {
  for (var i = array.length - 1; i > 0; i--) {
    var j = Math.floor(Math.random() * (i + 1));
    if(array[i]===undefined || array[j]===undefined){
      continue;
    }
    var temp = array[i];
    array[i] = array[j];
    array[j] = temp;
  }
  return array;
}

generate();
  </script>
</body>

</html>
